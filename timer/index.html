<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‰ºÅÁîªÁÆ°ÁêÜ„ÉÑ„Éº„É´</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f5f5f5;
}
.container {
  height: 100vh;
  display: flex;
  flex-direction: column;
}
.timer-area {
  flex: 1;
  padding: 10px;
}
.timer-box {
  background: #fff;
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 10px;
  text-align: center;
}
.timer-title {
  font-weight: bold;
}
.timer-input {
  width: 80px;
  font-size: 16px;
  text-align: center;
}
.time-display {
  font-size: 32px;
  margin: 8px 0;
}
.button-row {
  display: flex;
  justify-content: center;
  gap: 10px;
}
button {
  padding: 8px 16px;
  font-size: 16px;
}
.dice-area {
  flex: 1;
  background: #fff;
  margin: 10px;
  border-radius: 12px;
  text-align: center;
  padding: 20px;
}
.dice-box {
  width: 120px;
  height: 120px;
  margin: 20px auto;
  border-radius: 16px;
  border: 4px solid #333;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
  font-weight: bold;
  background: #ffffff;
}
.rolling {
  animation: shake 0.2s infinite;
}
@keyframes shake {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(2deg); }
  50% { transform: rotate(0deg); }
  75% { transform: rotate(-2deg); }
  100% { transform: rotate(0deg); }
}
</style>
</head>

<body>
<div class="container">

  <div class="timer-area">
    <!-- „Çø„Ç§„Éû„Éº1 -->
    <div class="timer-box">
      <div class="timer-title">‚è± „Çø„Ç§„Éû„Éº‚ë†</div>
      <input type="number" id="input1" class="timer-input" placeholder="Áßí"> Áßí
      <div id="display1" class="time-display">0</div>
      <div class="button-row">
        <button onclick="startTimer(1)">„Çπ„Çø„Éº„Éà</button>
        <button onclick="resetTimer(1)">„É™„Çª„ÉÉ„Éà</button>
      </div>
    </div>

    <!-- „Çø„Ç§„Éû„Éº2 -->
    <div class="timer-box">
      <div class="timer-title">‚è± „Çø„Ç§„Éû„Éº‚ë°</div>
      <input type="number" id="input2" class="timer-input" placeholder="Áßí"> Áßí
      <div id="display2" class="time-display">0</div>
      <div class="button-row">
        <button onclick="startTimer(2)">„Çπ„Çø„Éº„Éà</button>
        <button onclick="resetTimer(2)">„É™„Çª„ÉÉ„Éà</button>
      </div>
    </div>
  </div>

  <!-- „Çµ„Ç§„Ç≥„É≠ -->
  <div class="dice-area">
    <div class="timer-title">üé≤ „Çµ„Ç§„Ç≥„É≠</div>
    <div id="dice" class="dice-box">?</div>
    <button onclick="rollDice()">Âõû„ÅôÔºÅ</button>
  </div>

</div>

<script>
let timers = { 1: null, 2: null };

/* iPhoneÈ¢®„Çø„Ç§„Éû„ÉºÈü≥ */
function playSound() {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();

  osc.type = 'triangle';
  osc.frequency.setValueAtTime(440, ctx.currentTime);

  gain.gain.setValueAtTime(0.001, ctx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.4, ctx.currentTime + 0.05);
  gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 1.0);

  osc.connect(gain);
  gain.connect(ctx.destination);

  osc.start();
  osc.stop(ctx.currentTime + 1.0);
}

function startTimer(num) {
  const input = document.getElementById('input' + num);
  const display = document.getElementById('display' + num);
  let time = parseInt(input.value);

  if (isNaN(time) || time <= 0) return;

  clearInterval(timers[num]);
  display.textContent = time;

  timers[num] = setInterval(() => {
    time--;
    display.textContent = time;
    if (time <= 0) {
      clearInterval(timers[num]);
      playSound();
    }
  }, 1000);
}

function resetTimer(num) {
  clearInterval(timers[num]);
  document.getElementById('display' + num).textContent = 0;
}

/* „Çµ„Ç§„Ç≥„É≠ÊäΩÈÅ∏„Ç®„Éï„Çß„ÇØ„Éà */
function rollDice() {
  const dice = document.getElementById('dice');
  dice.classList.add('rolling');

  let count = 0;
  const interval = setInterval(() => {
    dice.textContent = Math.floor(Math.random() * 6) + 1;
    count++;
  }, 100);

  setTimeout(() => {
    clearInterval(interval);
    const result = Math.floor(Math.random() * 6) + 1;
    dice.textContent = result;
    dice.classList.remove('rolling');
  }, 3000);
}
</script>
</body>
</html>
